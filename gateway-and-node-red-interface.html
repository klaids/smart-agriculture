<!DOCTYPE HTML>
<!--
	Arcana by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Gateway and Node-Red Interface</title>
		<link rel="shortcut icon" href="images/favicon.ico">
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header">

					<!-- Logo -->
						<h1>Smart Agriculture <em>a sensors network with LoRa</em></a></h1>

					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li><a href="index.html">Home</a></li>
								<li><a href="lora-technology.html">LoRa Technology</a></li>
								<li class="current">
									<a href="#">Project</a>
									<ul>
										<li><a href="field-modules.html">Field Modules</a></li>
										<li><a href="gateway-and-node-red-interface.html">Gateway and Node-Red Interface</a></li>
										<li><a href="sensors.html">Sensors</a></li>
										<li><a href="regarding-security.html">Regarding Security</a></li>
									</ul>
								</li>
								<li><a href="future-development.html">Future Developments</a></li>
								<li><a href="#footer">Contacts</a></li>
							</ul>
						</nav>

				</div>

			<!-- Main -->
				<section class="wrapper style1">
					<div class="container">

									<!-- Content -->

										<article>
											<header>
												<h2>Node-RED Dashboard Presentation</h2>
												<p>A platform to manage easily your end devices and monitoring your system.</p>
											</header>
											<center>
											<span class="image responsive"><img src="images/Node-RED/node1.jpeg" alt="" /></span>
											<p style="text-align:center;">immagine di test, ne metterò una reale</p>
											</center>
												<p>
												In this part we will discuss these topics:
													<li><a href="#raspberry">Description about our Gateway and its shield to receive the data</a>
													<li><a href="#node-red-introduction">Node-RED Introduction</a>
													<li><a href="#smart-agriculture-dashboard">How Smart-Agriculture Dashboard works</a>
												</p>
											<p>
												If you did not fully understand some parts of this paragraph or you want to learn more, you can watch this video:
											</p>
											<center>
												<div class="auto-resizable-iframe">
												  <div>
													<iframe frameborder="0" allowfullscreen="" src="https://www.youtube.com/embed/v=HU9c1AbpkE4?version=3&loop=1&playlist=HU9c1AbpkE4"></iframe>
												  </div>
												</div> 
											</center>
											<p>
												You can download this text from you GitHub Repository from this 
												<a href="https://github.com/lorenzozaccomer/smart-agriculture/blob/main/Documentation/Node-RED%20Dashboard%20Presentation.pdf">link</a>
												and also from this link you can download the libraries installation guide (.pdf), 
												<a href="https://github.com/lorenzozaccomer/smart-agriculture/blob/main/Documentation/Manuals.pdf">here</a>.
											</p>
											
											<section id="raspberry">
											<h3>Description about our Gateway and its shield to receive the data</h3>
											<h4>Gateway</h4>
											<p>
												To receive the information’s from the device node we used a Raspberry Pi 3B+ (RPi3), 
												because is so smart for many applications, low power consumption, 
												you can interface on it in several ways, 
												configurable as you can want and and 40 GPIO PIN to put the shield that you want, 
												and but not less important, is very small, 
												and is usable also for the users that are not practical with CLI commands. 
											<!-- RPi3 figure -->
											<center>
												<span class="image responsive"><img src="images/Node-RED/rpi3.png" alt="" /></span>
												<p style="text-align:center;">Raspberry Pi 3B+</p>
											</center>
											
											<h4>Shield for LoraWAN Application</h4>
											Our choice about the shield for the RPi3 is fell on IoT LoraNode pHAT 
											<a href="https://uk.pi-supply.com/products/iot-lora-node-phat-for-raspberry-pi">IoT LoRa Node pHAT for Raspberry Pi (Multi Frequency),</a> 
											that used a RAK811 LoRa Module
											<a href="https://uk.pi-supply.com/products/rak811-lora-lorawan-module">RAK811 LoRa / LoRAWAN module (based on SX1276) 868/915MHz up to 3km range,</a>											
											based on SX1276, because can manage a very high number of node, 
											has low consumption (50mA in transmission) and high range coverage (up to 3km).
											</p>
											<!-- pHAT figure 2 -->
											<center>
												<span class="image responsive"><img src="images/Node-RED/phat-2.png" alt="" /></span>
												<p style="text-align:center;">pHAT</p>
											</center>
											<!-- pHAT figure 1 -->
											<center>
												<span class="image responsive"><img src="images/Node-RED/lora-node.png" alt="" /></span>
												<p style="text-align:center;">pHAT</p>
											</center>
											
											<p>
											By default, this shield is not thought to use as gateway, 
											the basic configuration is to send the data, but our goal for this project is to reduce the costs, 
											and the gateway shield has a significant cost, so we configured the pHAT module as gateway.
											It has 2 antennas, one internal, used by default, and one external to improve the range of the transmission.
											In our beta test for the firsts data transmission, we used the internal antenna because is smart, 
											but in the end of final tests we used the external antenna for improve the data range, 
											to use it we de-solder the inductor from on the INT solder pads and put it on the EXT solder pads.
											</p>
											<!-- pHAT figure 3 -->
											<center>
												<span class="image responsive"><img src="images/Node-RED/phat-3.png" alt="" /></span>
												<p style="text-align:center;">pHAT INT/EXT Solder pads</p>
											</center>
											
											<p>
											From the
											<a href="https://uk.pi-supply.com/products/iot-lora-node-phat-for-raspberry-pi">Official Pi-Supply repository</a> 											
											on GitHub you can find additional informations and software.
											</p>
											</section>
											
											<!--NODE-RED Introduction-->
											<section id="node-red-introduction">
											<h3>Node-RED Introduction</h3>
											<p>What’s Node-RED?<br>
												Node-RED, based on JavaScript, is a graphical object programming platform to perform different type of projects.<br>
												One of the major features is to programming using the nodes, 
												link to each other to obtain the result, 
												and every node can contain a little script or information to manipulate the input message, 
												this feature allows to the people who are unfamiliar with coding, to create their own project very quickly.<br>
												Another feature of Node-RED it can be installed in different type of devices, for example on Raspberry Pi, your PC, etc.<br>
												Also, you can secure it using a password, to do that you need to modify settings.js (hidden) file, for more details:
												<a href="https://nodered.org/docs/user-guide/runtime/securing-node-red">Securing Node-RED</a>.<br>
												For more details about Node-RED watch on the 
												<a href="https://nodered.org/">Node-RED official website</a> or watch on your Regarding Security tab.
											</p>
											</section>

											<!-- How Smart-Agriculture Dashboard works -->
											<section id="smart-agriculture-dashboard">
											<h3>How Smart-Agriculture Dashboard works</h3>
											<p>
												In this part we describe the main flow with the same name of the project, 
												where the script will launch and data’s management, so let’s start.
											</p>
											
											<!-- How it works -->
											<h4>How it works</h4>
											<p>
												At Start&Stop (Figure 1) nodes group you can manually start (Message Reception) or stop the script (Stop Searching New Message), 
												or you can use the button on the Home Tab.<br>
												The connection with the next group is done with the link highlighted in red.
											</p>
											<!-- Figure 1 -->
											<center>
												<span class="image responsive"><img src="images/Node-RED/immagine1.png" alt="" /></span>
												<p style="text-align:center;">Figure 1</p>
											</center>
											
											<p>
												In the following group arrives the input on LoraPi Receive Script node and it launch 
												(break) the .py script with the command previously set and return that the gateway will 
												receives from the LoRa Nodes, as you can see in the next screens.
											</p>
											<!-- Figure 2 -->
											<center>
												<span class="image responsive"><img src="images/Node-RED/Immagine2.png" alt="" /></span>
												<p style="text-align:center;">Figure 2</p>
											</center>
											<!-- Figure 3 -->
											<center>
											<span class="image responsive"><img src="images/Node-RED/Immagine3.png" alt="" /></span>
											<p style="text-align:center;">Figure 3</p>
											</center>
											<p>
												About the Extrapolation group, we will focus on Extract Information from payload and DevAddr subgroups.<br>
												A focus is on Decrypt LoraWAN, where you need to put your personal Network Secret Key and Application Secret Key.<br>
												On the first one, we have all the conversion and manipulation part of the payload that our gateway receives.<br>
												The Sensor data hex/string decode will return the original message with $ separator, 
												and the last node create a dictionary with all the values, and example is at Figure 5, 
												where the values are generated from our test board.
											</p>
											<!-- Figure 4 -->
											<center>
											<span class="image responsive"><img src="images/Node-RED/Immagine4.png" alt="" /></span>
											<p style="text-align:center;">Figure 4</p>
											</center>
											<!-- Figure 5 -->
											<center>
											<span class="image responsive"><img src="images/Node-RED/Immagine5.png" alt="" /></span>
											<p style="text-align:center;">Figure 5</p>
											</center>
											<p>
												At this point, we have obtained the original message, and the DevAddr (Figure 6), 
												but is not in string format as we need, so to convert it we used the second one subgroup, 
												and it done other secondaries activities, 
												for example you can add additional information to better identify the board on the Dashboard.
											</p>
											<!-- Figure 6 -->
											<center>
											<span class="image responsive"><img src="images/Node-RED/Immagine6.png" alt="" /></span>
											<p style="text-align:center;">Figure 6</p>
											</center>
											<p>
												At the end of all of this, there’s the last fundamental group (Devices) 
												that from the DevAddr identify redirect to the proper flow, as you can see in this Figure.
											</p>
											<!-- Figure 7 -->
											<center>
											<span class="image responsive"><img src="images/Node-RED/Immagine7.png" alt="" /></span>
											<p style="text-align:center;">Figure 7</p>
											</center>
											</section>
										</article>

								</div>
							</div>
						</div>
					</div>
				</section>

			<!-- Footer -->
				<div id="footer">
					<div class="container">
						<div class="row">
							<section class="col-6 col-12-narrower">
								<h2>Links to Stuff</h2>
								<ul class="links">
									<li><a href="https://www.uniud.it/it">University of Udine</a></li>
									<li><a href="http://www.diegm.uniud.it/bernardini/Laboratorio_Didattico/">Didactic Laboratory of Information Engineering</a></li>
									<li><a href="https://lora-alliance.org/">LoRa alliance</a></li>
									<li><a href="https://www.st.com/content/st_com/en.html">ST site</a></li>
								</ul>
							</section>
							<section class="col-6 col-12-narrower">
								<h2>Contacts</h2>
								<a href="https://github.com/lorenzozaccomer/smart-agriculture" class="icon brands fa-github"> GitHub Repository<span class="label">GitHub</span></a>
								<br>
								<br>
								<h4>Email</h4>
									<a href="mailto:zaccomer.lorenzo@spes.uniud.it" class="fas fa-at"> zaccomer.lorenzo@spes.uniud.it</a> <br/>
									<a href="mailto:shyti.klaid@spes.uniud.it" class="fas fa-at"> shyti.klaid@spes.uniud.it</a> <br/>
									<a href="mailto:dibetta.ivan@spes.uniud.it" class="fas fa-at"> dibetta.ivan@spes.uniud.it</a>
							</section>
						</div>
					</div>

					<!-- Icons -->

					<!-- Copyright -->
						<div class="copyright">
							<ul class="menu">
								<li>&copy; 2021 University of Udine<br>Polytechnic Department of Engineering and Architechture<br>Didactic Laboratory of Information Engineering</li>
								<li>&nbsp <br>Design: <a href="http://html5up.net">HTML5 UP</a><br> &nbsp</li>
							</ul>
						</div>

				</div>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script>
			// When the user scrolls the page, execute myFunction
			window.onscroll = function() {myFunction()};

			// Get the navbar
			var navbar = document.getElementById("nav");
			
			var serviceWrapper = document.getElementById("page-wrapper")

			// Get the offset position of the navbar
			var sticky = navbar.offsetTop;

			// Add the sticky class to the navbar when you reach its scroll position. Remove "sticky" when you leave the scroll position
			function myFunction() {
			  if (window.pageYOffset >= sticky) {
				navbar.classList.add("sticky");
				serviceWrapper.classList.add("service-stick-mode");
			  } else {
				navbar.classList.remove("sticky");
				serviceWrapper.classList.remove("service-stick-mode");
			  }
			}
			</script>

	</body>
</html>
